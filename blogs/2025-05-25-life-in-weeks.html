<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>人生周历：我的生命地图 - 筑居思</title>
    <meta name="description" content="可视化展示我人生的每一周，了解时间的流逝与珍贵">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/life-weeks.css">
    <link rel="icon" href="../images/icon/icon.svg" type="image/svg+xml">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- 左侧固定导航栏 -->
    <div class="sidebar">
        <div class="sidebar-logo">
            <h1>筑居<span>思</span></h1>
        </div>
        <ul class="sidebar-nav">
            <li><a href="../index.html">首页</a></li>
            <li class="active"><a href="../blogs.html">个人博客</a></li>
            <li><a href="../cabinet.html">造物拾遗</a></li>
            <li><a href="../portfolio.html">个人作品集</a></li>
        </ul>
        <div class="theme-toggle">
            <button id="theme-toggle-btn" aria-label="切换主题">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sun-icon"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="moon-icon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            </button>
        </div>
    </div>

    <!-- 移动端菜单按钮 -->
    <button class="mobile-menu-toggle" aria-label="打开导航菜单">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <!-- 主要内容区域 -->
    <div class="main-content">
        <div class="container">
            <main>
                <article class="blog-content">
                    <h1>人生周历：我的生命地图</h1>
                    <div class="blog-meta">n            <span class="date-tag">2025年5月1日</span>
                        <span>发布于：2025-05-25</span>
                    </div>
                    
                    <blockquote>
                        <p>每一个格子都代表着我生命中的一周。</p>
                        <p>当我们看到自己的生命以这种方式展现时，我们才能真正理解时间的珍贵。</p>
                    </blockquote>
                    
                    <p>人生很长，又很短。漫长的一生往往在不经意间流逝。如果假设我们能活到90岁，那么我们一生将拥有4680周的时间。看似很多，但当把它们全部列出来时，却让人感叹生命的短暂。</p>
                    
                    <h2>我的人生周历</h2>
                    
                    <p>👋 你好，我是Qianny，一个生于时代之交的千禧宝宝。这是我的生命地图，每个小方格代表我生命中的一周。点击任意方格，可以查看当时我在何地做什么。</p>
                    
                    <p>📍 这个项目灵感来源于 Wait But Why 网站的生命周概念。</p>
                    
                    <p>🌱 这个生命地图是一个持续更新的作品。随着时间推移，我会不断地更新它。</p>
                    
                    <blockquote>
                        <p>"生命不在于长短，而在于你如何活过。" – 蒙田</p>
                    </blockquote>
                    
                    <h2>我的人生周历</h2>
                    
                    <div class="life-chart">
                        <div class="age-labels">
                            <span>出生</span>
                            <span>10岁</span>
                            <span>20岁</span>
                            <span>30岁</span>
                            <span>40岁</span>
                            <span>50岁</span>
                            <span>60岁</span>
                            <span>70岁</span>
                            <span>80岁</span>
                            <span>90岁</span>
                            <span>100岁</span>
                        </div>
                        
                        <div id="tooltip" class="tooltip"></div>
                        <div id="lifeGrid">
                            <!-- JavaScript将在这里生成生命地图 -->
                        </div>
                        
                        <div class="birth-year">
                            <span>🎂 0 in 2000</span>
                        </div>

                        <!-- 图例 -->
                        <div class="legend">
                            <h3>居住地（边框颜色）</h3>
                            <div class="legend-container">
                                <div class="legend-item">
                                    <div class="legend-color location-beijing"></div>
                                    <span>北京</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color location-shanghai"></div>
                                    <span>上海</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color location-guangzhou"></div>
                                    <span>广州</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color location-abroad"></div>
                                    <span>国外</span>
                                </div>
                            </div>

                            <h3>活动（填充颜色）</h3>
                            <div class="legend-container">
                                <div class="legend-item">
                                    <div class="legend-color activity-school"></div>
                                    <span>学校</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color activity-college"></div>
                                    <span>大学</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color activity-work"></div>
                                    <span>工作</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color activity-travel"></div>
                                    <span>旅行</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="reflection">
                        <h3>当我看到这些格子时，我想到了什么？</h3>
                        <p>看到生命以周为单位呈现在面前，我深刻地意识到：</p>
                        <ul>
                            <li>时间是最珍贵的资源，一旦流逝就无法挽回</li>
                            <li>我们往往高估一天能做的事，而低估十年能实现的变化</li>
                            <li>重要的不是拥有多少时间，而是如何善用每一周</li>
                            <li>生活不应该只是为未来存在，当下的每一刻同样珍贵</li>
                        </ul>
                    </div>
                    
                    <h2>如何使用这个生命地图</h2>
                    <p>这个生命地图不仅仅是一个视觉上的提醒，它还可以成为一个强大的规划和反思工具：</p>
                    
                    <h3>1. 回顾与标记</h3>
                    <p>尝试回顾过去的重要事件，在对应的格子上做标记。人生的高光时刻是在哪些周发生的？重大转折点又是什么时候？</p>
                    
                    <h3>2. 规划未来</h3>
                    <p>看着那些未来的空白格子，思考你想在人生中实现什么？短期内，你计划如何度过接下来的几十个格子？长远来看，哪些年份对你的目标至关重要？</p>
                    
                    <h3>3. 珍视当下</h3>
                    <p>当前闪烁的格子提醒我们："这就是现在，这就是你正在度过的一周。"它会帮助我们更加珍惜每一天，不让时间在毫无意义的事情上流逝。</p>
                    
                    <h2>我的思考</h2>
                    <p>自从我开始使用这个生命地图后，我对时间的认知发生了根本性的变化。我发现自己：</p>
                    <ul>
                        <li>更加慎重地考虑如何分配时间</li>
                        <li>减少了拖延，因为我意识到每一周都是有限的</li>
                        <li>开始优先考虑真正重要的事情，而不是紧急但不重要的任务</li>
                        <li>更加重视与家人朋友相处的时光</li>
                        <li>不再为小事烦恼，因为从长远来看，许多烦恼都不值一提</li>
                    </ul>
                    
                    <p>或许，这就是古人所说的："三十而立，四十而不惑，五十而知天命"的智慧。当我们能够宏观地看待自己的一生，才能真正明白什么是重要的，什么是可以放下的。</p>

                    <h2>创建属于你自己的生命地图</h2>
                    <p>如果你也想创建一个属于自己的生命地图，可以尝试以下步骤：</p>
                    <ol>
                        <li>准备一张大纸或使用数字工具</li>
                        <li>计算你的出生日期到目前为止经过了多少周</li>
                        <li>绘制一个52列的网格，每行代表一年，填充已经过去的周数</li>
                        <li>使用不同的颜色标记人生的重要阶段</li>
                        <li>定期回顾这个地图，思考时间的使用</li>
                    </ol>
                    
                    <p>"度过一天和虚度一天的时间是一样的，但意义却截然不同。"希望这个生命地图能帮助我们所有人更加珍惜时间，活在当下，创造一个无悔的人生。</p>
                    <div class="copyright-notice">
                        <p>欢迎引用本文观点或图片，但请注明出处并附上本文链接。</p>
                    </div>
                </article>
            </main>

            <footer>
                <div class="footer-content">
                    <p>© 2025 筑居思. 保留所有权利.</p>
                </div>
            </footer>
        </div>
    </div>

    <script src="../js/main.js"></script>
    <script src="../js/related-content.js"></script>
    <script src="../js/tag-system.js"></script>
    <script src="../js/life-data.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('开始初始化周历...');
            
            const lifeGrid = document.getElementById('lifeGrid');
            if (!lifeGrid) {
                console.error('未找到lifeGrid元素');
                return;
            }
            
            const weeksInYear = 52;
            const yearsToShow = 30; // 显示到30岁左右就足够了
            
            // 假设出生于2000年
            const birthYear = 2000;
            const currentDate = new Date();
            const currentYear = currentDate.getFullYear();
            const currentWeekOfYear = Math.floor((currentDate - new Date(currentYear, 0, 1)) / (7 * 24 * 60 * 60 * 1000));
            
            // 计算已经过去的周数
            const age = currentYear - birthYear;
            const pastWeeks = (age * weeksInYear) + currentWeekOfYear;
            
            console.log(`当前年龄: ${age}岁, 已过周数: ${pastWeeks}`);
            
            // 更新周历范围 - 只显示到当前日期后的一年
            const maxWeeksToShow = Math.min(pastWeeks + 52, yearsToShow * weeksInYear);
            
            // 清空现有内容
            lifeGrid.innerHTML = '';
            
            // 中国传统色系 - 每五年一个颜色，参考zhongguose.com
            const chineseColors = [
                'rgb(238, 236, 218)', // 0-4岁 - 玉色
                'rgb(235, 244, 223)', // 5-9岁 - 素色
                'rgb(225, 238, 248)', // 10-14岁 - 月白
                'rgb(240, 214, 214)', // 15-19岁 - 藕色
                'rgb(212, 242, 231)', // 20-24岁 - 水绿
                'rgb(238, 222, 176)'  // 25-29岁 - 牙色
            ];
            
            // 创建一个主容器
            const mainContainer = document.createElement('div');
            mainContainer.className = 'life-container';
            lifeGrid.appendChild(mainContainer);
            
            // 计算每行显示的周数
            const weeksPerRow = 20; // 每行显示20周
            
            // 创建一个大的网格容器，不再按年份分隔
            const allWeeksGrid = document.createElement('div');
            allWeeksGrid.className = 'life-grid';
            mainContainer.appendChild(allWeeksGrid);
            
            // 计算总周数
            const totalWeeks = Math.min(yearsToShow * weeksInYear, maxWeeksToShow + 1);
            
            // 生成所有周格子
            for (let i = 0; i < totalWeeks; i++) {
                // 计算当前年龄和在年内的周数
                const year = Math.floor(i / weeksInYear);
                const week = i % weeksInYear;
                
                // 每行开始时，如果是新的一年且不是第一年，添加一个视觉分隔
                if (week === 0 && year > 0 && i % weeksPerRow === 0) {
                    const separator = document.createElement('div');
                    separator.className = 'year-separator';
                    separator.style.gridColumn = '1 / -1'; // 跨越整行
                    allWeeksGrid.appendChild(separator);
                }
                
                const weekDiv = document.createElement('div');
                weekDiv.className = 'week';
                
                // 设置五年色块的背景色
                const fiveYearBlock = Math.floor(year / 5);
                const colorIndex = Math.min(fiveYearBlock, chineseColors.length - 1);
                weekDiv.style.backgroundColor = chineseColors[colorIndex];
                
                // 设置默认样式
                let locationClass = 'location-none';
                let activityClass = 'activity-none';
                let eventDescription = '';
                let eventEmoji = '';
                
                // 查找该周所属的生命阶段
                for (const [start, end, location, activity, desc] of lifeData) {
                    if (i >= start && i <= end) {
                        locationClass = `location-${location}`;
                        activityClass = `activity-${activity}`;
                        
                        // 只在该阶段的第一周显示文字描述
                        if (i === start) {
                            eventDescription = desc;
                            eventEmoji = getEmojiForEvent(desc);
                        }
                        break;
                    }
                }
                
                // 添加过去/当前/未来的类
                if (i < pastWeeks) {
                    weekDiv.classList.add('past');
                } else if (i === pastWeeks) {
                    weekDiv.classList.add('current');
                } else {
                    weekDiv.classList.add('future');
                }
                
                // 添加地点和活动类
                weekDiv.classList.add(locationClass, activityClass);
                
                // 检查是否为重要事件 - 重要事件总是显示
                if (importantEvents[i]) {
                    const [desc, customEmoji] = importantEvents[i];
                    eventDescription = desc;
                    eventEmoji = customEmoji || getEmojiForEvent(desc);
                }
                
                // 创建内容容器
                const contentDiv = document.createElement('div');
                contentDiv.className = 'week-content';
                
                // 只有有内容时才添加到格子并设置data-fulltext属性
                if (eventDescription) {
                    // 添加emoji
                    if (eventEmoji) {
                        const emojiSpan = document.createElement('div');
                        emojiSpan.className = 'week-emoji';
                        emojiSpan.textContent = eventEmoji;
                        contentDiv.appendChild(emojiSpan);
                    }
                    
                    // 处理文本长度
                    const textSpan = document.createElement('div');
                    textSpan.className = 'week-text';
                    
                    // 文本处理逻辑: 
                    // - 如果少于5个字符，添加空格到5个字符
                    // - 如果大于7个字符，截取7个字符并添加省略号
                    let displayText = eventDescription;
                    
                    if (displayText.length < 5) {
                        // 文本太短，用空格填充到5个字符
                        displayText = displayText.padEnd(5, ' ');
                    } else if (displayText.length > 7) {
                        // 文本太长，截取并添加省略号
                        displayText = displayText.substring(0, 7) + '…';
                    }
                    
                    textSpan.textContent = displayText;
                    contentDiv.appendChild(textSpan);
                    
                    // 创建悬停详情框用于显示完整内容
                    const yearOfLife = Math.floor(i / weeksInYear);
                    const weekOfYear = i % weeksInYear + 1;
                    const yearDate = birthYear + yearOfLife;
                    
                    const hoverDetails = document.createElement('div');
                    hoverDetails.className = 'hover-details';
                    hoverDetails.innerHTML = `
                        <strong>${yearDate}年，${yearOfLife}岁第${weekOfYear}周</strong>
                        <div style="margin-top: 5px;">${eventEmoji || ''} ${eventDescription}</div>
                    `;
                    
                    weekDiv.appendChild(hoverDetails);
                }
                
                // 添加内容到格子
                weekDiv.appendChild(contentDiv);
                
                // 计算周数和日期信息
                const yearOfLife = Math.floor(i / weeksInYear);
                const weekOfYear = i % weeksInYear + 1;
                const yearDate = birthYear + yearOfLife;
                
                // 设置title属性，鼠标悬停时显示详细信息
                weekDiv.title = `${yearDate}年，${yearOfLife}岁第${weekOfYear}周\n${eventDescription || '无特殊事件'}`;
                
                allWeeksGrid.appendChild(weekDiv);
            }
            
            console.log('周历初始化完成');
        });
    </script>
</body>
</html> 
