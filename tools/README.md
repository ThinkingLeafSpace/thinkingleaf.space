# 博客文件重命名工具

这个工具可以自动将博客文章的文件名重命名为"年-月-日-文章原本名称"的格式。

## 功能介绍

- 自动扫描 `blogs/` 目录下的所有HTML文件
- 从每个文件中提取发布日期信息
- 将文件重命名为 `YYYY-MM-DD-原文件名.html` 格式
- 跳过已经按照日期格式命名的文件

## 使用方法

### 修复博客文章中的日期问题（推荐先运行）

如果您的博客文章中存在日期格式不完整或缺失的问题，请先运行日期修复脚本：

1. 打开终端
2. 进入项目根目录
3. 运行以下命令:

```bash
chmod +x tools/fix_blog_dates.sh
./tools/fix_blog_dates.sh
```

### 在旧版 macOS 上运行（推荐方式）

如果您使用的是旧版macOS系统，或者无法安装Python和相关依赖库，请使用纯bash版本的脚本：

1. 打开终端
2. 进入项目根目录
3. 运行以下命令:

```bash
chmod +x tools/rename_blog_files_bash.sh
./tools/rename_blog_files_bash.sh
```

### 在 macOS 或 Linux 上运行（需要Python）

1. 打开终端
2. 进入项目根目录
3. 运行以下命令:

```bash
chmod +x tools/rename_blog_files.sh
./tools/rename_blog_files.sh
```

### 在 Windows 上运行

1. 打开文件资源管理器
2. 进入项目的 `tools` 目录
3. 双击运行 `rename_blog_files.bat` 文件

## 依赖项

### Python版本
此工具需要以下软件和库:

- Python 3.6+
- BeautifulSoup4 (脚本会尝试自动安装)

### 纯bash版本
纯bash版本不需要任何额外依赖，只使用系统内置的bash、grep和sed命令，适合在无法安装Python的旧版macOS系统上运行。

## 工具说明

### 日期修复工具 (fix_blog_dates.sh)

这个工具用于修复博客文章中的日期问题：

1. 修复不完整的日期格式，例如：
   - 将"2024年12月"补全为"2024年12月01日"
   - 将"2022年9月1"修复为标准格式"2022年9月01日"

2. 为缺少日期的文章添加日期信息：
   - 如果文件名中包含日期（如"2024-11-10-article.html"），会使用该日期
   - 否则使用当前日期

3. 确保日期信息存在于两个位置：
   - 在 `<span class="blog-date">` 元素中
   - 在文章底部的"写于"段落中

### 文件重命名工具的特点

1. 使用多种方法尝试提取日期：
   - 从 `<span class="blog-date">` 元素中提取
   - 从"写于"文本中提取
   - 查找任意位置的日期格式（YYYY年MM月DD日）
   - 从meta标签中提取
   - 检查HTML注释中的日期
   - 从包含"日期"、"发布"等关键词附近提取
   - 从文件名中推断（如 "24-things.html" 推断为2024年的文章）

2. 智能处理无法提取日期的文件：
   - 如果无法提取到日期，使用当前日期进行重命名
   - 所有文件都会被重命名，不会留下未处理的文件

3. 彩色输出和详细统计：
   - 使用彩色文本显示处理进度和结果
   - 提供详细的统计信息：重命名文件数、跳过文件数和处理失败文件数

### 基本原理

1. 脚本会从HTML文件中提取日期信息
2. 提取到的日期会被转换为 `YYYY-MM-DD` 格式
3. 最后将文件重命名为 `YYYY-MM-DD-原文件名.html`

## 注意事项

- 已经按照日期格式命名的文件将被跳过
- 脚本会在控制台输出处理进度和结果
- 纯bash版本会对无法提取日期的文件使用当前日期进行重命名
- 建议先运行日期修复脚本，然后再运行重命名脚本，以获得最佳效果 