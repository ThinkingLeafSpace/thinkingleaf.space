# 🚀 Obsidian博客快速部署指南

> 从Obsidian到个人网站，一键完成！

## 📋 目录

1. [准备工作](#准备工作)
2. [创建新文章](#创建新文章)
3. [部署文章](#部署文章)
4. [常见问题](#常见问题)
5. [高级功能](#高级功能)

---

## 🛠️ 准备工作

### 1. 确认Obsidian路径配置

检查 `blog_config.json` 中的路径是否正确：

```bash
# 查看当前配置
cat blog_config.json

# 如果路径不对，编辑配置文件
nano blog_config.json
```

**路径示例：**
```json
{
  "obsidian_vault": "/Users/qianny/Nutstore Files/Qianny-obsidian/个人网站",
  "obsidian_attachments": [
    "/Users/qianny/Nutstore Files/Qianny-obsidian/个人网站/attachments"
  ]
}
```

### 2. 安装Python依赖

如果尚未安装，运行：

```bash
pip3 install -r scripts/requirements.txt
```

---

## ✍️ 创建新文章

### 方法一：使用Obsidian模板（推荐）

1. 在Obsidian中，按 `Cmd+P` 打开命令面板
2. 输入 "模板" 或 "Insert template"
3. 选择 "插入模板: 博客文章模板"
4. 自动创建包含Front Matter的新文章

### 方法二：手动创建

1. 复制 `scripts/obsidian-blog-template.md` 的内容
2. 创建新文件，粘贴内容
3. 修改Front Matter中的信息

### Front Matter格式

```yaml
---
title: "文章标题"
date: "2025-01-15"  # 或使用 {{date:YYYY-MM-DD}}
description: "文章简短描述"
category:
  - 标签1
  - 标签2
---
```

**必需字段：**
- `title`: 文章标题
- `date`: 发布日期（YYYY-MM-DD格式）

**可选字段：**
- `description`: 简短描述（建议填写）
- `category`: 标签列表（建议添加）

---

## 🚀 部署文章

### 一键部署（推荐）

```bash
cd "/Users/qianny/Nutstore Files/ThinkingLeafSpace 20250704com/ThinkingLeafSpace 20250924com"

./scripts/deploy_blog.sh "/Users/qianny/Nutstore Files/Qianny-obsidian/个人网站/文章名.md"
```

**部署流程：**
1. ✅ 验证Markdown格式
2. ✅ 转换Markdown为HTML
3. ✅ 更新博客列表
4. ✅ 完成！

### 手动验证（可选）

如果只想验证格式而不部署：

```bash
python3 scripts/validate_blog.py "/path/to/article.md"
```

### 仅转换HTML

如果不更新列表，只转换文件：

```bash
python3 scripts/markdown_to_html.py "/path/to/article.md"
```

### 仅更新列表

如果只更新博客列表：

```bash
python3 scripts/update_blogs_list.py
```

---

## ❓ 常见问题

### 1. category显示为"None"

**问题：** Front Matter中category为空或格式错误

**解决：**
```yaml
# ✅ 正确方式1：列表格式
category:
  - 标签1
  - 标签2

# ✅ 正确方式2：单标签
category: RSS

# ❌ 错误方式：空值
category:

# ❌ 错误方式：对象格式
category:
  xxx: yyy
```

### 2. description显示为"None"

**问题：** description为空字符串或格式错误

**解决：**
```yaml
# ✅ 正确方式1：有内容
description: "文章描述"

# ✅ 正确方式2：留空（完全不要这行）
# 或者
description: ""

# ❌ 错误方式：null
description: null
```

### 3. 日期格式错误

**问题：** 日期不是YYYY-MM-DD格式

**解决：**
```yaml
# ✅ 正确
date: "2025-01-15"

# ❌ 错误
date: "2025/01/15"
date: "2025年1月15日"
date: 2025-1-5
```

### 4. 图片不显示

**问题：** 图片路径不正确

**解决：**
- 将图片放在Markdown文件同目录
- 或放在 `attachments/` 目录
- 使用 `![描述](图片.png)` 格式

**支持的格式：**
```
# Obsidian Wiki链接
![[图片.png]]

# Markdown标准格式
![描述](图片.png)

# 附件目录
![描述](attachments/图片.png)
```

### 5. 转换脚本报错

**问题：** 缺少Python依赖

**解决：**
```bash
pip3 install -r scripts/requirements.txt
```

**依赖列表：**
- markdown
- pyyaml
- pygments (可选，用于代码高亮)

### 6. 博客列表不更新

**问题：** blogs.html没有更新

**解决：**
手动运行更新脚本：

```bash
python3 scripts/update_blogs_list.py
```

---

## 🎨 高级功能

### 1. 多标签支持

文章可以有多个标签，标签会以小徽章形式显示：

```yaml
category:
  - 禅修
  - 内观
  - 自我觉察
  - Vipassana
```

### 2. 图片自动处理

图片会自动复制到 `images/blog/` 目录，路径自动转换：

```
文章目录/
├── article.md
└── image.png

# 自动转换为
images/blog/image.png
```

### 3. Markdown功能支持

✅ 支持的格式：
- 标题（H1-H6）
- 粗体、斜体、删除线
- 代码块（带语法高亮）
- 引用
- 列表（有序、无序）
- 链接
- 图片
- 表格
- 分隔线
- 脚注

❌ 不支持的格式：
- Obsidian双向链接 `[[笔记]]` → 显示为普通文本
- Obsidian标签 `#标签` → 会被忽略
- Obsidian嵌入 `![[嵌入笔记]]` → 需手动转换
- 数学公式（LaTeX）→ 需额外配置

### 4. 自定义CSS

标签样式可以在 `css/blog-post.css` 中自定义：

```css
.blog-tags {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.tag {
    background-color: var(--bg-tertiary);
    padding: 0.35rem 0.8rem;
    border-radius: 20px;
    font-size: 0.8rem;
}
```

---

## 📝 最佳实践

### 1. 文件命名

使用有意义的文件名，包含日期：

```
2025-01-15-我的文章.md  # ✅ 推荐
文章标题.md             # ⚠️ 也可以，会自动添加日期
```

### 2. Front Matter规范

```yaml
---
title: "清晰具体的标题"
date: "2025-01-15"
description: "50字左右的简短描述，会显示在博客列表"
category:
  - 第一个标签
  - 第二个标签
  - 最多3-5个标签
---
```

### 3. 标题层级

```markdown
# 文章标题（H1，自动生成）

## 章节标题（H2）

### 小节标题（H3）

#### 微章节标题（H4）
```

### 4. 图片使用

```markdown
# ✅ 推荐的图片格式
![威海的海鸥](haiou.jpg)

# 图片会自动：
# 1. 复制到 images/blog/
# 2. 路径自动转换
# 3. 添加懒加载
```

### 5. 代码块

```markdown
# Python代码
```python
def hello():
    print("Hello, World!")
```

# Shell命令
```bash
cd /path/to/dir
ls -la
```
```

---

## 🔗 相关文档

- [OBSIDIAN模板使用说明.md](OBSIDIAN模板使用说明.md)
- [OBSIDIAN路径配置.md](OBSIDIAN路径配置.md)
- [使用Obsidian模板.md](使用Obsidian模板.md)
- [现有文章说明.md](现有文章说明.md)

---

## 🆘 获取帮助

如果遇到问题：

1. 首先查看本指南的"常见问题"部分
2. 运行验证脚本检查格式：`python3 scripts/validate_blog.py 文件.md`
3. 检查 `blog_config.json` 配置是否正确
4. 确认Python依赖已安装：`pip3 install -r scripts/requirements.txt`
5. 查看错误日志，根据提示修复问题

---

**祝写作愉快！** 📝✨

