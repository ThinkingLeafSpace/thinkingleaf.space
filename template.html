<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="博客文章描述">
  <title>博客标题 - 思考庇护所</title>
  
  <!-- 关键CSS内联，提高首屏渲染速度 -->
  <style>
    :root {
      --color-bg: #F8F6F2;
      --color-text: #2D2D2D;
      --color-accent-lotus-red: #C84630;
      --color-text-secondary: #666;
      --color-border: #eee;
      --font-family-serif: "source han serif sc", "思源宋体", "Songti SC", serif;
      --content-width: 720px;
      --spacing-unit: 8px;
    }
    
    /* 深色模式变量 */
    .dark-theme {
      --color-bg: #212121;
      --color-text: #D1C7B9;
      --color-text-secondary: #7E9C8D;
      --color-accent-lotus-red: #E55A4B;
      --color-border: #3A3A3A;
    }
    body {
      margin: 0;
      padding: 0;
      font-family: var(--font-family-serif);
      background-color: var(--color-bg);
      color: var(--color-text);
      font-size: 16px;
      line-height: 1.8;
      transition: background-color 0.4s ease, color 0.4s ease;
    }
    .article-container {
      max-width: var(--content-width);
      margin: 0 auto;
      padding: calc(var(--spacing-unit) * 8) calc(var(--spacing-unit) * 2);
    }
    h1 {
      font-size: 36px;
      line-height: 1.3;
      color: var(--color-accent-lotus-red);
    }
  </style>
  
  <!-- 预加载关键资源 -->
  <link rel="preload" href="../style.css" as="style">
  <link rel="preload" href="../script.js" as="script">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- 主要样式表，非阻塞加载 -->
  <link rel="stylesheet" href="../style.css">
  <link href="https://fonts.googleapis.com/css2?family=Kaiti+SC:wght@700&family=Source+Han+Serif+SC:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
  <!-- 无障碍跳过链接 -->
  <a href="#main-content" class="skip-link">跳到主要内容</a>

  <!-- 阅读进度指示器 -->
  <div class="progress-container">
    <div class="progress-bar" id="reading-progress"></div>
  </div>

  <main class="article-container" id="main-content">
    <article>
      <header>
        <h1>博客标题</h1>
        <div class="meta">
          <span class="date">发布日期：2023年1月1日</span>
          <span class="author">作者：思考庇护所</span>
        </div>
      </header>
      
      <!-- 自动生成的文章目录 -->
      <div class="table-of-contents" id="toc">
        <h3>目录</h3>
        <ul id="toc-list">
          <!-- 由JavaScript自动生成 -->
        </ul>
      </div>
      
      <div class="article-body">
        <!-- 博客内容放这里 -->
      </div>
    </article>
  </main>

  <footer class="site-footer">
    <p id="footer-greeting">愿你在此找到片刻的安宁与灵感。</p>
    <nav class="footer-nav">
      <a href="/" class="footer-link">首页</a>
      <a href="/what-is-zhu-ju-si.html" class="footer-link">何为筑居思？</a>
      <a href="/remake.html" class="footer-link">筑 · 创造</a>
      <a href="/remake.html" class="footer-link">居 · 拾遗</a>
      <a href="/blog" class="footer-link">思 · 博客</a>
    </nav>
    <p>© 2025 筑居思. 保留所有权利.</p>
  </footer>

  <!-- 主题切换按钮 -->
  <button class="theme-toggle" id="theme-toggle" aria-label="切换深浅模式" style="position: fixed; top: 20px; right: 20px; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 1000; border: 1px solid var(--color-border); background: rgba(255, 255, 255, 0.2);">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sun-icon">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="moon-icon" style="display: none;">
      <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
    </svg>
  </button>

  <script src="js/theme-switcher.js"></script>
  <script src="js/lazy-loading.js"></script>
  <script src="../script.js" defer></script>
  <script>
    // 主题切换功能
    document.addEventListener('DOMContentLoaded', function() {
      const themeToggle = document.getElementById('theme-toggle');
      const sunIcon = document.querySelector('.sun-icon');
      const moonIcon = document.querySelector('.moon-icon');
      
      // 首先检查系统偏好
      const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
      
      // 然后检查本地存储中的主题设置（优先级更高）
      const savedTheme = localStorage.getItem('theme');
      
      // 应用主题
      if (savedTheme === 'dark' || (savedTheme === null && prefersDarkScheme.matches)) {
        document.body.classList.add('dark-theme');
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
      } else {
        document.body.classList.remove('dark-theme');
        sunIcon.style.display = 'block';
        moonIcon.style.display = 'none';
      }
      
      // 切换主题
      themeToggle.addEventListener('click', function() {
        document.body.classList.toggle('dark-theme');
        
        // 切换图标
        if (document.body.classList.contains('dark-theme')) {
          sunIcon.style.display = 'none';
          moonIcon.style.display = 'block';
          localStorage.setItem('theme', 'dark');
        } else {
          sunIcon.style.display = 'block';
          moonIcon.style.display = 'none';
          localStorage.setItem('theme', 'light');
        }
      });
    });
  </script>
</body>
</html> 