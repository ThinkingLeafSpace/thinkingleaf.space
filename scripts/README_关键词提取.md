# 自动关键词提取脚本使用说明

## 功能说明

`auto_add_keywords.py` 脚本可以自动为博客文章提取并添加关键词（keywords）meta标签。

## 主要特性

1. **智能关键词提取**
   - 使用jieba分词库进行中文语义分析
   - 优先提取标题和描述中的关键词
   - 从正文内容中提取高频重要词汇
   - 自动添加领域相关关键词（禅修、设计、思考等）

2. **自动更新HTML文件**
   - 自动在meta标签中添加或更新keywords
   - 保持HTML文件格式不变
   - 支持批量处理所有博客文章

3. **关键词质量优化**
   - 过滤停用词和无意义词汇
   - 优先保留标题和描述中的关键词
   - 自动识别领域相关关键词（如：内观、Vipassana、正念、设计、思考等）

## 安装依赖

```bash
pip install jieba
```

或者使用requirements.txt：

```bash
pip install -r requirements.txt
```

## 使用方法

### 基本使用

```bash
cd scripts
python3 auto_add_keywords.py
```

脚本会自动：
1. 扫描 `blogs/` 目录下的所有HTML文件
2. 提取每篇文章的关键词
3. 在HTML文件的 `<head>` 部分添加或更新 `keywords` meta标签

### 关键词提取逻辑

1. **标题关键词**（权重最高）
   - 从文章标题中提取重要词汇
   - 优先保留标题中的关键词

2. **描述关键词**（权重较高）
   - 从meta description中提取关键词

3. **正文关键词**（权重一般）
   - 使用jieba分词分析正文内容
   - 提取高频名词、动词、形容词
   - 过滤停用词和无意义词汇

4. **领域关键词**（自动识别）
   - 根据内容自动识别领域相关关键词
   - 支持的领域：禅修、设计、思考、技术、旅行、阅读、工作等

## 关键词格式

关键词以逗号分隔，格式如下：

```html
<meta name="keywords" content="关键词1, 关键词2, 关键词3, ..., 筑居思">
```

每个关键词组通常包含8-10个关键词，最后会自动添加"筑居思"作为网站名称。

## 领域关键词库

脚本内置了以下领域的关键词库：

- **禅修**: 内观、Vipassana、正念、冥想、禅修、修行、觉知、观想等
- **设计**: 设计、UI设计、UX设计、用户体验、界面设计、交互设计等
- **思考**: 思考、反思、哲学、人生、生活、成长、自我、觉察等
- **技术**: 技术、编程、开发、代码、前端、后端、算法等
- **旅行**: 旅行、旅游、大理、云南、风景、探索等
- **阅读**: 阅读、读书、书籍、文学、写作等
- **工作**: 工作、职业、职场、工作坊、项目等

## 注意事项

1. **备份文件**
   - 建议在运行脚本前备份博客文件
   - 脚本会直接修改HTML文件

2. **关键词质量**
   - 脚本提取的关键词基于算法，可能不是完全准确
   - 建议运行后检查关键词，必要时手动调整

3. **已有关键词**
   - 如果文章已有关键词，脚本会更新它们
   - 如果文章没有关键词，脚本会新增

4. **文件路径**
   - 脚本会自动检测博客目录
   - 确保在scripts目录下运行脚本

## 示例输出

```
找到 17 个博客文件
==================================================
处理: 2024-07-06-half-year-mindfulness-journey-in-dali.html
  提取的关键词: Vipassana, 正念, 冥想, 半载, 观想, 小记, 大理, 在内, 课程, 内观
  ✓ 成功更新关键词
...
==================================================
处理完成: 成功 17 个, 跳过 0 个
```

## 故障排除

1. **jieba未安装**
   - 脚本会使用简单的方法提取关键词
   - 建议安装jieba以获得更好的关键词质量

2. **无法提取内容**
   - 检查HTML文件格式是否正确
   - 确保文章有标题或正文内容

3. **关键词质量不佳**
   - 可以手动编辑HTML文件调整关键词
   - 或者优化文章的标题和描述

## 更新日志

- 2025-01-XX: 初始版本
  - 支持自动提取关键词
  - 支持批量处理
  - 支持领域关键词识别

