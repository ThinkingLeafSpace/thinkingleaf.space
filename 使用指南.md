# Obsidian 博客部署 - 快速使用指南

## 📦 第一次使用

### 1. 安装依赖

```bash
cd "/Users/qianny/Nutstore Files/ThinkingLeafSpace 20250704com/ThinkingLeafSpace 20250924com"
pip3 install -r scripts/requirements.txt
```

如果安装失败，尝试：
```bash
python3 -m pip install markdown pyyaml pillow
```

---

## 🚀 日常使用流程

### 第一步：在 Obsidian 中写文章

创建 Markdown 文件，在**文件开头**添加：

```markdown
---
title: "你的文章标题"
date: 2025-01-15
description: "文章简短描述"
category: 博客
---

这里是你的正文内容...

可以插入图片：
![[图片名.png]]
```

**Front Matter 说明：**
- `title`: 文章标题（必填）
- `date`: 发布日期，格式 `YYYY-MM-DD`（必填）
- `description`: 文章描述（可选）
- `category`: 文章分类（可选，默认"博客"）

### 第二步：运行部署脚本

**⚠️ 重要**: `/完整路径/to/你的文章.md` 只是占位符，必须替换为实际路径！

**三种方法获取文件路径**:

**方法1: 拖放文件（最简单）**
```bash
# 在Finder中找到你的Markdown文件，直接拖到终端
./scripts/deploy_blog.sh [把文件拖到这里，路径会自动显示]
```

**方法2: 手动输入**
```bash
./scripts/deploy_blog.sh ~/Documents/Obsidian/你的文章.md
```

**方法3: 从Obsidian获取路径**
- 在Obsidian中右键文件 → "在Finder中显示"
- 或使用命令面板 "复制路径"

**完整示例：**
```bash
# 示例1: 使用绝对路径
./scripts/deploy_blog.sh "/Users/qianny/Documents/Obsidian/我的博客/新文章.md"

# 示例2: 使用波浪号路径
./scripts/deploy_blog.sh ~/Documents/Obsidian/新文章.md

# 示例3: 路径有空格需要引号
./scripts/deploy_blog.sh "~/Documents/Obsidian/我的博客/新文章.md"
```

### 第三步：查看结果

脚本会自动：
- ✅ 生成 HTML 文件到 `blogs/` 目录
- ✅ 复制图片到 `images/blog/` 目录
- ✅ 显示转换结果

---

## 🖼️ 图片处理

### 在 Obsidian 中插入图片的方式

**方式1：拖拽插入（推荐）**
- 直接将图片拖到 Obsidian 编辑器中
- Obsidian 会自动创建 `![[图片名.png]]` 格式
- 脚本会自动处理

**方式2：手动输入**
```markdown
![[图片名.png]]
或
![描述](图片名.png)
```

### 图片查找规则

脚本会按以下顺序查找图片：
1. Markdown 文件同目录
2. `attachments/` 子目录
3. `assets/` 子目录
4. `blog_config.json` 中配置的 Obsidian 附件目录

### 配置图片目录（可选）

编辑 `blog_config.json`：

```json
{
  "obsidian_attachments": [
    "/你的/Obsidian/库/attachments"
  ]
}
```

---

## 📝 完整示例

### 示例 Markdown 文件

```markdown
---
title: "如何提高工作效率"
date: 2025-01-15
description: "分享一些提高工作效率的方法和工具"
category: 博客
---

## 引言

今天想分享一些提高工作效率的心得。

![工作场景](workspace.jpg)

### 方法一：番茄工作法

使用番茄工作法可以...

## 结语

希望这些方法对你有用！
```

### 运行转换

```bash
./scripts/deploy_blog.sh "/path/to/如何提高工作效率.md"
```

### 生成的文件

- HTML: `blogs/2025-01-15-如何提高工作效率.html`
- 图片: `images/blog/workspace.jpg`
- 路径自动更新为 `../images/blog/workspace.jpg`

---

## ⚙️ 高级配置

### 自定义图片输出目录

编辑 `blog_config.json`：

```json
{
  "site_images_dir": "images",
  "obsidian_attachments": [
    "/path/to/attachments"
  ]
}
```

### 手动指定输出文件名

```bash
python3 scripts/markdown_to_html.py input.md blogs/custom-name.html
```

---

## 🐛 常见问题

### Q: 提示找不到图片？

**A:** 检查图片是否在以下位置：
- Markdown 文件同目录
- `attachments/` 子目录
- 或在 `blog_config.json` 中配置 Obsidian 附件目录

### Q: Front Matter 解析失败？

**A:** 确保格式正确：
```markdown
---
title: "标题"
date: 2025-01-15
---
```
- 必须用 `---` 包围
- 日期格式必须是 `YYYY-MM-DD`

### Q: 脚本没有执行权限？

**A:** 运行：
```bash
chmod +x scripts/deploy_blog.sh
```

### Q: 图片显示不出来？

**A:** 
1. 检查脚本输出，看是否显示"已复制图片"
2. 打开生成的 HTML 文件，检查图片路径
3. 确保 `images/blog/` 目录存在

---

## 📋 快速检查清单

部署前确认：
- [ ] Python 依赖已安装
- [ ] Front Matter 格式正确
- [ ] 日期格式为 `YYYY-MM-DD`
- [ ] 图片文件存在
- [ ] 脚本有执行权限

---

## 💡 提示

1. **使用 Obsidian 模板**：创建模板自动添加 Front Matter
2. **图片命名**：使用英文和数字，避免空格和特殊字符
3. **批量处理**：可以写个循环脚本批量转换多篇文章
4. **版本控制**：转换后记得 `git add` 和 `git commit`

---

## 🔗 相关文件

- `scripts/markdown_to_html.py` - 核心转换脚本
- `scripts/deploy_blog.sh` - 一键部署脚本
- `blog_config.json` - 配置文件
- `README_OBSIDIAN_DEPLOY.md` - 详细文档

---

## 📞 需要帮助？

查看详细文档：`README_OBSIDIAN_DEPLOY.md`

或检查脚本输出信息，通常会显示错误原因。

